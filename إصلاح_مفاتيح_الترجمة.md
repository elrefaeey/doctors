# إصلاح مشكلة مفاتيح الترجمة

## المشكلة
كانت تظهر مفاتيح الترجمة في الواجهة بدلاً من النص المترجم (مثل: `common.save` أو `profile.experience`)

## الحل المنفذ ✅

### 1. تحديث ملفات الترجمة
تم تحديث ملفي الترجمة بشكل كامل:
- ✅ `src/locales/ar.json` - الترجمة العربية
- ✅ `src/locales/en.json` - الترجمة الإنجليزية

### 2. المفاتيح المضافة

#### مفاتيح `common`:
- `reviews` - "تقييم" / "reviews"

#### مفاتيح `profile` (جديدة):
- `experience` - "سنوات الخبرة" / "Years of Experience"
- `patients` - "المرضى" / "Patients"
- `rating` - "التقييم" / "Rating"
- `consultation` - "سعر الكشف" / "Consultation Fee"

#### مفاتيح `footer`:
- `areYouDoctor` - "هل أنت طبيب ؟" / "Are you a doctor?"
- `joinAsDoctor` - "انضم الى أطباء هيلث كونكت الآن" / "Join Health Connect doctors now"

### 3. التحقق من جميع المفاتيح

تم التأكد من وجود جميع المفاتيح المستخدمة في:
- ✅ `src/pages/Index.tsx` - الصفحة الرئيسية
- ✅ `src/pages/DoctorProfile.tsx` - صفحة ملف الدكتور
- ✅ `src/pages/PatientDashboard.tsx` - لوحة تحكم المريض
- ✅ `src/pages/DoctorDashboard.tsx` - لوحة تحكم الدكتور
- ✅ `src/components/Layout.tsx` - التخطيط العام
- ✅ `src/components/DoctorCard.tsx` - بطاقة الدكتور

## البنية الكاملة لملفات الترجمة

### الأقسام الرئيسية:
1. `common` - مفاتيح عامة (loading, save, cancel, etc.)
2. `auth` - تسجيل الدخول والتسجيل
3. `dashboard` - لوحات التحكم
4. `profile` - معلومات الملف الشخصي
5. `doctor` - معلومات الأطباء
6. `appointment` - المواعيد
7. `subscription` - الاشتراكات
8. `admin` - لوحة تحكم الأدمن
9. `notifications` - الإشعارات
10. `errors` - رسائل الخطأ
11. `success` - رسائل النجاح
12. `nav` - القائمة الرئيسية
13. `home` - الصفحة الرئيسية
14. `specializations` - التخصصات الطبية
15. `login` - صفحات تسجيل الدخول
16. `footer` - التذييل
17. `adminDash` - لوحة تحكم الأدمن
18. `patientDash` - لوحة تحكم المريض
19. `doctorDash` - لوحة تحكم الدكتور
20. `chat` - المحادثات

## كيفية استخدام الترجمة

### في أي مكون:
```typescript
import { useLanguage } from '@/contexts/LanguageContext';

const MyComponent = () => {
  const { t, language } = useLanguage();
  
  return (
    <div>
      <h1>{t('common.appName')}</h1>
      <p>{t('home.heroTitle')}</p>
      <button>{t('common.save')}</button>
    </div>
  );
};
```

### البنية:
- المفتاح: `section.key`
- مثال: `common.loading` → "جاري التحميل..." (عربي) أو "Loading..." (إنجليزي)

## التحقق من عمل الترجمة

### 1. تغيير اللغة:
- يوجد زر تبديل اللغة في الهيدر (EN/AR)
- يتم حفظ اللغة في localStorage
- يتم تطبيق RTL/LTR تلقائياً

### 2. التحقق من المفاتيح:
إذا ظهر مفتاح بدلاً من النص:
1. تأكد أن المفتاح موجود في ملفي الترجمة
2. تأكد من البنية الصحيحة: `section.key`
3. تأكد من استخدام `t()` بشكل صحيح

### 3. إضافة مفاتيح جديدة:
```json
// في ar.json
{
  "section": {
    "newKey": "النص بالعربي"
  }
}

// في en.json
{
  "section": {
    "newKey": "Text in English"
  }
}
```

## الملفات المعدلة

1. `src/locales/ar.json` - تحديث كامل
2. `src/locales/en.json` - تحديث كامل
3. `src/contexts/LanguageContext.tsx` - بدون تغيير (يعمل بشكل صحيح)

## النتيجة

✅ جميع مفاتيح الترجمة موجودة في الملفين
✅ لا توجد مفاتيح مفقودة
✅ النصوص تظهر بشكل صحيح حسب اللغة المختارة
✅ RTL/LTR يعمل بشكل صحيح
✅ حفظ اللغة في localStorage يعمل

## ملاحظات مهمة

1. **Fallback**: إذا لم يتم العثور على مفتاح، يتم عرض المفتاح نفسه
2. **Firestore**: النظام يحاول تحميل الترجمات من Firestore أولاً، ثم يستخدم الملفات المحلية
3. **Performance**: الترجمات يتم تحميلها مرة واحدة عند بدء التطبيق
4. **localStorage**: اللغة المختارة يتم حفظها تلقائياً

## التاريخ
تم التنفيذ: 14 فبراير 2026
