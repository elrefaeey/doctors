# ูุธุงู ุงูุญุฌุฒ ุจุฏูู ุญุณุงุจ - ุฏููู ุดุงูู

## โจ ุงูููุฒุงุช ุงููุถุงูุฉ

### 1. ูุธุงู ุงูุญุฌุฒ ุจุฏูู ุญุณุงุจ
ูููู ูุฃู ุดุฎุต ุญุฌุฒ ููุนุฏ ูุน ุงูุทุจูุจ ุจุฏูู ุฅูุดุงุก ุญุณุงุจ!

#### ูุนูููุงุช ุงูุทุจูุจ ุงููุนุฑูุถุฉ:
- โ ุงุณู ุงูุทุจูุจ ูุงูุชุฎุตุต
- โ ุณุนุฑ ุงููุดู
- โ ููุช ุงูุงูุชุธุงุฑ ุงูุชูุฑูุจู
- โ ุนููุงู ุงูุนูุงุฏุฉ/ุงููููุน

#### ุงูููุงุนูุฏ ุงููุชุงุญุฉ:
- โ ูุชู ุฌูุจูุง ูู ุฌุฏูู ุงูุทุจูุจ (workingHours)
- โ ุชุธูุฑ ููุท ุงูุฃูุงู ูุงูุฃููุงุช ุงูุชู ุญุฏุฏูุง ุงูุทุจูุจ
- โ ุงูููุงุนูุฏ ุงููุญุฌูุฒุฉ ุชุธูุฑ ูุดุทูุจุฉ ูุบูุฑ ูุงุจูุฉ ููููุฑ

#### ุฎุทูุงุช ุงูุญุฌุฒ:
1. ุงููุฑูุถ ูุฎุชุงุฑ ุงูููู ูุงูููุช ุงููุชุงุญ
2. ูุถุบุท "ุงุญุฌุฒ ุงูุขู"
3. ุชุธูุฑ ุงุณุชูุงุฑุฉ ูููุก:
   - ุงุณู ุงููุฑูุถ (ุฅุฌุจุงุฑู)
   - ุฑูู ุงููุงุชู (ุฅุฌุจุงุฑู)
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู ููู ููุตู ุจู)
   - ูุตู ุงูุญุงูุฉ/ููุงุญุธุงุช (ุงุฎุชูุงุฑู)
4. ุจุนุฏ ุงูุฅุฑุณุงูุ ูุฑู ุฑุณุงูุฉ ุชุฃููุฏ:
   - "ุชู ุชุฃููุฏ ุงูุญุฌุฒ ูุน ุฏ. [ุงุณู ุงูุทุจูุจ]"
   - "ุฑูู ุงูุญุฌุฒ: [ุฑูู ุนุดูุงุฆู]"
5. ูุชู ุญูุธ ุจูุงูุงุช ุงูุญุฌุฒ ูู ููุญุฉ ุชุญูู ุงูุทุจูุจ

#### ุจูุงูุงุช ุงูุญุฌุฒ ุงููุญููุธุฉ:
- ุงุณู ุงููุฑูุถ
- ุฑูู ุงููุงุชู
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ูุตู ุงูุญุงูุฉ
- ุงูุชุงุฑูุฎ ูุงูููุช
- ุฑูู ุงูุญุฌุฒ
- ุญุงูุฉ ุงูุญุฌุฒ

### 2. ูุธุงู ุงููุญุงุฏุซุฉ ูููุฑุถู ุงููุณุฌููู
ุฅุฐุง ูุงู ุงููุฑูุถ ูุฏูู ุญุณุงุจ ููุณุฌู ุฏุฎูู:

#### ุฒุฑ ุงููุญุงุฏุซุฉ:
- โ ูุธูุฑ ุฒุฑ "ูุญุงุฏุซุฉ ุงูุทุจูุจ" ูู ุตูุญุฉ ุงูุทุจูุจ
- โ ูุชุงุญ ููุท ูููุฑุถู ุงููุณุฌููู
- โ ูููู ุงููุฑูุถ ูุจุงุดุฑุฉ ูุตูุญุฉ ุงููุญุงุฏุซุฉ

#### ููุงุนุฏ ุงููุญุงุฏุซุฉ:
- โ ุงููุญุงุฏุซุฉ ุชูุชุญ ุนูุฏูุง ูุฑุฏ ุงูุทุจูุจ ุฃู ููุงูู ุนูู ุงูุฑุณุงูุฉ
- โ ุงูุฑุณุงุฆู ูุญููุธุฉ ูู Firebase
- โ ูุฑุฆูุฉ ููุท ูููุฑูุถ ูุงูุทุจูุจ
- โ ุงูุฑุณุงุฆู ุงูุฃูุฏู ูู ุฃุณุจูุน ุชูุญุฐู ุชููุงุฆูุงู

#### ุญุฐู ุงูุฑุณุงุฆู ุงููุฏููุฉ:
- โ Cloud Function ุชุนูู ููููุงู ูู ููุชุตู ุงูููู
- โ ุชุญุฐู ุงูุฑุณุงุฆู ุงูุฃูุฏู ูู 7 ุฃูุงู
- โ ูุซุงู: ุฑุณุงูุฉ ุฃูุฑุณูุช ููู ุงูุฌูุนุฉ ุชูุญุฐู ุงูุฌูุนุฉ ุงูุชุงููุฉ
- โ ูุญุงูุธ ุนูู ุงููููุน ุฎููู ูุณุฑูุน

### 3. ููุญุฉ ุชุญูู ุงูุทุจูุจ ุงููุญุฏุซุฉ
#### ูุณู ุฌุฏูุฏ: "ุงูุญุฌูุฒุงุช"
- โ ุนุฑุถ ุฌููุน ุงูุญุฌูุฒุงุช (ูุน ูุจุฏูู ุญุณุงุจ)
- โ ูุนูููุงุช ูุงููุฉ: ุงูุงุณูุ ุงููุงุชูุ ุงูุจุฑูุฏุ ุงูููุชุ ุฑูู ุงูุญุฌุฒ
- โ ูุตู ุงูุญุงูุฉ (ุฅู ููุฌุฏ)
- โ ุชุฑุชูุจ ุญุณุจ ุงูุชุงุฑูุฎ ูุงูููุช

#### ูุณู "ุงูููุงุนูุฏ":
- โ ุงูููุงุนูุฏ ูู ุงููุฑุถู ุงููุณุฌููู ููุท
- โ ูุฑุชุจุทุฉ ุจุญุณุงุจุงุช ุงููุฑุถู
- โ ูููู ูุชุญ ูุญุงุฏุซุฉ ูุน ุงููุฑูุถ

## ๐ ูููู ุงูุจูุงูุงุช ูู Firebase

### ูุฌููุนุฉ `bookings` (ุฌุฏูุฏุฉ)
```javascript
{
  doctorId: string,
  doctorName: string,
  date: string, // YYYY-MM-DD
  timeSlot: string, // HH:MM
  patientName: string,
  patientMobile: string,
  patientEmail: string,
  caseDescription: string,
  bookingNumber: string, // BK + random
  status: 'pending' | 'confirmed' | 'cancelled',
  isGuest: true,
  createdAt: timestamp
}
```

### ูุฌููุนุฉ `chats`
```javascript
{
  doctorId: string,
  patientId: string,
  appointmentId: string,
  doctorName: string,
  patientName: string,
  lastMessage: string,
  lastMessageTime: timestamp,
  unreadCount: {
    doctor: number,
    patient: number
  },
  createdAt: timestamp
}
```

### ูุฌููุนุฉ `chats/{chatId}/messages`
```javascript
{
  senderId: string,
  senderRole: 'doctor' | 'patient',
  senderName: string,
  text: string,
  imageUrl: string | null,
  createdAt: timestamp,
  read: boolean
}
```

## ๐ ููุงุนุฏ ุงูุฃูุงู

### Firestore Rules
```javascript
// Bookings - ุงูุณูุงุญ ุจุงูุญุฌุฒ ุจุฏูู ุญุณุงุจ
match /bookings/{bookingId} {
  allow read: if isSignedIn() && 
                 (resource.data.doctorId == request.auth.uid || isAdmin());
  allow create: if true; // Allow guest bookings
  allow update: if isSignedIn() && 
                   (resource.data.doctorId == request.auth.uid || isAdmin());
  allow delete: if isAdmin();
}

// Chats - ููุท ุงูุทุจูุจ ูุงููุฑูุถ
match /chats/{chatId} {
  allow read: if isSignedIn() && 
                 (resource.data.doctorId == request.auth.uid || 
                  resource.data.patientId == request.auth.uid);
  allow create: if isSignedIn();
  allow update: if isSignedIn() && 
                   (resource.data.doctorId == request.auth.uid || 
                    resource.data.patientId == request.auth.uid);
  allow delete: if isAdmin();
}
```

## ๐ Cloud Functions

### 1. ุญุฐู ุงูุฑุณุงุฆู ุงููุฏููุฉ ุชููุงุฆูุงู
```javascript
exports.deleteOldMessages = functions.pubsub
  .schedule('0 0 * * *') // ูู ููู ูู ููุชุตู ุงูููู
  .timeZone('Africa/Cairo')
  .onRun(async (context) => {
    // ุญุฐู ุงูุฑุณุงุฆู ุงูุฃูุฏู ูู 7 ุฃูุงู
  });
```

## ๐ฑ ุชุฏูู ุงูุนูู

### ุญุฌุฒ ุจุฏูู ุญุณุงุจ:
```
ุฒุงุฆุฑ โ ุตูุญุฉ ุงูุทุจูุจ โ ุงุฎุชูุงุฑ ููุนุฏ โ ููุก ุงูุจูุงูุงุช โ ุชุฃููุฏ ุงูุญุฌุฒ
    โ
ุญูุธ ูู bookings collection
    โ
ุนุฑุถ ุฑูู ุงูุญุฌุฒ
    โ
ุงูุทุจูุจ ูุฑู ุงูุญุฌุฒ ูู ููุญุชู
```

### ูุญุงุฏุซุฉ ูุน ุญุณุงุจ:
```
ูุฑูุถ ูุณุฌู โ ุตูุญุฉ ุงูุทุจูุจ โ ุฒุฑ "ูุญุงุฏุซุฉ ุงูุทุจูุจ"
    โ
ุฅูุดุงุก/ูุชุญ ูุญุงุฏุซุฉ
    โ
ุฅุฑุณุงู ุฑุณุงุฆู
    โ
ุงูุทุจูุจ ูุฑุฏ
    โ
ุญุฐู ุชููุงุฆู ุจุนุฏ ุฃุณุจูุน
```

## ๐ฏ ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

### ูููุงุช ุฌุฏูุฏุฉ:
1. โ `src/services/bookingService.ts` - ุฎุฏูุงุช ุงูุญุฌุฒ
2. โ `BOOKING_SYSTEM_GUIDE.md` - ูุฐุง ุงูููู

### ูููุงุช ูุนุฏูุฉ:
1. โ `src/pages/DoctorProfile.tsx` - ูุธุงู ุงูุญุฌุฒ ุงููุงูู
2. โ `src/pages/DoctorDashboard.tsx` - ูุณู ุงูุญุฌูุฒุงุช
3. โ `firestore.rules` - ููุงุนุฏ ุงูุญุฌุฒ
4. โ `functions/index.js` - ุญุฐู ุงูุฑุณุงุฆู ุงููุฏููุฉ

## ๐ง ุฎุทูุงุช ุงููุดุฑ

### 1. ูุดุฑ ุงูููุงุนุฏ
```bash
firebase deploy --only firestore:rules
```

### 2. ูุดุฑ Cloud Functions (ุงุฎุชูุงุฑู - ูุชุทูุจ Blaze Plan)
```bash
firebase deploy --only functions
```

### 3. ุจูุงุก ููุดุฑ ุงููููุน
```bash
npm run build
firebase deploy --only hosting
```

## โ ุงูุชุญูู ูู ุงูุนูู

### ุงุฎุชุจุงุฑ ุงูุญุฌุฒ ุจุฏูู ุญุณุงุจ:
1. ุงูุชุญ ุตูุญุฉ ุทุจูุจ (ุจุฏูู ุชุณุฌูู ุฏุฎูู)
2. ุงุฎุชุฑ ุชุงุฑูุฎ ูููุช
3. ุงุถุบุท "ุงุญุฌุฒ ุงูุขู"
4. ุงููุฃ ุงูุจูุงูุงุช
5. ุชุฃูุฏ ูู ุธููุฑ ุฑูู ุงูุญุฌุฒ
6. ุชุญูู ูู ุธููุฑ ุงูุญุฌุฒ ูู ููุญุฉ ุงูุทุจูุจ

### ุงุฎุชุจุงุฑ ุงููุญุงุฏุซุฉ:
1. ุณุฌู ุฏุฎูู ููุฑูุถ
2. ุงูุชุญ ุตูุญุฉ ุทุจูุจ
3. ุงุถุบุท "ูุญุงุฏุซุฉ ุงูุทุจูุจ"
4. ุฃุฑุณู ุฑุณุงูุฉ
5. ุณุฌู ุฏุฎูู ูุทุจูุจ
6. ุชุญูู ูู ูุตูู ุงูุฑุณุงูุฉ

### ุงุฎุชุจุงุฑ ุญุฐู ุงูุฑุณุงุฆู ุงููุฏููุฉ:
1. ุงูุชุธุฑ ุญุชู ููุชุตู ุงูููู (ุฃู ุดุบู ุงูู Function ูุฏููุงู)
2. ุชุญูู ูู ุญุฐู ุงูุฑุณุงุฆู ุงูุฃูุฏู ูู ุฃุณุจูุน

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุตูุญุฉ ุงูุทุจูุจ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฏ. ุฃุญูุฏ ูุญูุฏ - ุทุจ ุงูุฃุณูุงู         โ
โ  โญ 4.5 (20 ุชูููู)                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ุนููุงู ุงูุนูุงุฏุฉ                  โ
โ  ๐ฐ ุณุนุฑ ุงููุดู: 200 ุฌููู            โ
โ  โฑ๏ธ ููุช ุงูุงูุชุธุงุฑ: 30 ุฏูููุฉ        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ุงุฎุชุฑ ุงูุชุงุฑูุฎ: [___________]    โ
โ                                     โ
โ  ุงุฎุชุฑ ุงูููุนุฏ:                      โ
โ  [09:00] [09:30] [10:00] [10:30]  โ
โ  [11:00] [11:30] [14:00] [14:30]  โ
โ                                     โ
โ  [ุงุญุฌุฒ ุงูุขู - 09:00]               โ
โ                                     โ
โ  [๐ฌ ูุญุงุฏุซุฉ ุงูุทุจูุจ] (ูููุณุฌููู)    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุงุณุชูุงุฑุฉ ุงูุญุฌุฒ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุจูุงูุงุช ุงูุญุฌุฒ                  [X] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงูุงุณู *                            โ
โ  [_____________________________]    โ
โ                                     โ
โ  ุฑูู ุงููุงุชู *                      โ
โ  [_____________________________]    โ
โ                                     โ
โ  ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)      โ
โ  [_____________________________]    โ
โ                                     โ
โ  ูุตู ุงูุญุงูุฉ (ุงุฎุชูุงุฑู)              โ
โ  [_____________________________]    โ
โ  [_____________________________]    โ
โ                                     โ
โ  [ุชุฃููุฏ ุงูุญุฌุฒ]                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุฑุณุงูุฉ ุงูุชุฃููุฏ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ ุชู ุชุฃููุฏ ุงูุญุฌุฒ!                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุชู ุญุฌุฒ ููุนุฏู ูุน ุฏ. ุฃุญูุฏ ูุญูุฏ      โ
โ                                     โ
โ  ุฑูู ุงูุญุฌุฒ:                        โ
โ  BK7X9M2K4                          โ
โ                                     โ
โ  ุงุญุชูุธ ุจุฑูู ุงูุญุฌุฒ ูููุฑุงุฌุนุฉ         โ
โ                                     โ
โ  [ุญุฌุฒ ููุนุฏ ุขุฎุฑ]                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ง ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุงุฏู)

ุญุงููุงูุ ุงููุธุงู ุฌุงูุฒ ูุฅุฑุณุงู ุจุฑูุฏ ุชุฃููุฏ ููู ูุญุชุงุฌ:
- ุชูุงูู ูุน ุฎุฏูุฉ ุจุฑูุฏ (SendGrid, AWS SES, ุฅูุฎ)
- ุฅุถุงูุฉ API Key ูู Firebase Functions
- ุชูุนูู ุงูู Function

## ๐ ุญู ุงููุดุงูู

### ุงูุญุฌุฒ ูุง ูุนูู:
- ุชุญูู ูู ูุดุฑ ููุงุนุฏ Firestore
- ุชุฃูุฏ ูู ูุฌูุฏ workingHours ููุทุจูุจ
- ุฑุงุฌุน Console ููุฃุฎุทุงุก

### ุงูููุงุนูุฏ ูุง ุชุธูุฑ:
- ุชุญูู ูู ุฌุฏูู ุงูุทุจูุจ (workingHours)
- ุชุฃูุฏ ูู ุชูุนูู ุงูููู ุงููุฎุชุงุฑ
- ุฑุงุฌุน ุฃููุงุช ุงูุจุฏุงูุฉ ูุงูููุงูุฉ

### ุงููุญุงุฏุซุฉ ูุง ุชุนูู:
- ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ููุฑูุถ
- ุชุญูู ูู ููุงุนุฏ chats ูู Firestore
- ุฑุงุฌุน Console ููุฃุฎุทุงุก

### ุงูุฑุณุงุฆู ูุง ุชูุญุฐู:
- ุชุญูู ูู ูุดุฑ Cloud Functions
- ุชุฃูุฏ ูู Blaze Plan ููุนู
- ุฑุงุฌุน Firebase Functions Logs

## ๐ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

โ ุญุฌุฒ ุจุฏูู ุญุณุงุจ
โ ููุงุนูุฏ ุฏููุงููููุฉ ูู ุฌุฏูู ุงูุทุจูุจ
โ ุฑูู ุญุฌุฒ ูุฑูุฏ ููู ุญุฌุฒ
โ ูุญุงุฏุซุฉ ูููุฑุถู ุงููุณุฌููู
โ ุญุฐู ุชููุงุฆู ููุฑุณุงุฆู ุงููุฏููุฉ
โ ูุงุฌูุฉ ุณููุฉ ูุจุณูุทุฉ
โ ูุชูุงูู ูุน ุงูุฌูุงู
โ ูู ุงูุจูุงูุงุช ูู Firebase
โ ูุง ุชูุฌุฏ ุจูุงูุงุช ุซุงุจุชุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **Cloud Functions ุชุชุทูุจ Blaze Plan** ูุญุฐู ุงูุฑุณุงุฆู ุงูุชููุงุฆู
2. **ุฅุฑุณุงู ุงูุจุฑูุฏ** ูุญุชุงุฌ ุชูุงูู ูุน ุฎุฏูุฉ ุจุฑูุฏ
3. **ุฑูู ุงูุญุฌุฒ** ุนุดูุงุฆู ููุฑูุฏ (BK + 9 ุฃุญุฑู)
4. **ุงูููุงุนูุฏ** ุชูุฌูุจ ูู workingHours ุงูุทุจูุจ
5. **ุงูุฑุณุงุฆู** ุชูุญุฐู ุจุนุฏ 7 ุฃูุงู ุชููุงุฆูุงู

## ๐ฎ ุชุญุณููุงุช ูุณุชูุจููุฉ

- [ ] ุฅุฑุณุงู ุจุฑูุฏ ุชุฃููุฏ ุชููุงุฆู
- [ ] ุฅุฑุณุงู SMS ูููุฑูุถ
- [ ] ุชุฐููุฑ ุจุงูููุนุฏ ูุจู ููู
- [ ] ุฅูุบุงุก/ุชุนุฏูู ุงูุญุฌุฒ
- [ ] ุชูููู ุงูุทุจูุจ ุจุนุฏ ุงูุฒูุงุฑุฉ
- [ ] ุฏูุน ุฃูููุงูู
- [ ] ููุฏูู ููู ูุน ุงูุทุจูุจ
