# تحديث نموذج إضافة الطبيب ✅

## التحديث المطلوب
إضافة جميع الحقول المطلوبة في نموذج إضافة الطبيب الجديد بدلاً من التعديل المنفصل.

## الحقول المضافة

### الحقول الأساسية (كانت موجودة):
- ✅ الاسم الإنجليزي
- ✅ الاسم العربي
- ✅ البريد الإلكتروني
- ✅ كلمة المرور
- ✅ التخصص (قائمة منسدلة)
- ✅ سعر الكشف

### الحقول الجديدة المضافة:
- ✅ سنوات الخبرة
- ✅ عدد المرضى
- ✅ التقييم (من 5)
- ✅ عدد المراجعات
- ✅ نوع الاشتراك (Silver/Gold/Blue)
- ✅ عنوان العيادة

## التغييرات المطبقة

### 1. تحديث State في AdminDashboard
```typescript
const [newDoctor, setNewDoctor] = useState({
  name: '',
  nameAr: '',
  email: '',
  password: '',
  specialization: '',
  price: '',
  clinicAddress: '',
  experience: '0',           // جديد
  totalPatients: '0',        // جديد
  rating: '0',               // جديد
  totalReviews: '0',         // جديد
  subscriptionType: 'silver', // جديد
});
```

### 2. تحديث دالة handleSaveDoctor
```typescript
await addDoctor({
  ...newDoctor,
  subscriptionType: newDoctor.subscriptionType,
  experience: Number(newDoctor.experience) || 0,
  totalPatients: Number(newDoctor.totalPatients) || 0,
  rating: Number(newDoctor.rating) || 0,
  totalReviews: Number(newDoctor.totalReviews) || 0,
  consultationPrice: Number(newDoctor.price) || 0,
  // ... باقي البيانات
});
```

### 3. تحديث النموذج (Form)
تم إضافة الحقول الجديدة في Grid بتنسيق 2 أعمدة:

```jsx
<div className="grid grid-cols-1 md:grid-cols-2 gap-5 mb-8">
  {/* الحقول الأساسية */}
  
  {/* الحقول الجديدة */}
  <div className="space-y-1.5">
    <label>سنوات الخبرة</label>
    <input name="experience" type="number" />
  </div>
  
  <div className="space-y-1.5">
    <label>عدد المرضى</label>
    <input name="totalPatients" type="number" />
  </div>
  
  <div className="space-y-1.5">
    <label>التقييم (من 5)</label>
    <input name="rating" type="number" step="0.1" min="0" max="5" />
  </div>
  
  <div className="space-y-1.5">
    <label>عدد المراجعات</label>
    <input name="totalReviews" type="number" />
  </div>
  
  <div className="space-y-1.5">
    <label>نوع الاشتراك</label>
    <select name="subscriptionType">
      <option value="silver">Silver - فضي</option>
      <option value="gold">Gold - ذهبي</option>
      <option value="blue">Blue - أزرق</option>
    </select>
  </div>
  
  <div className="space-y-1.5">
    <label>عنوان العيادة</label>
    <input name="clinicAddress" />
  </div>
</div>
```

### 4. تحديث دالة addDoctor في firebaseService
```typescript
await setDoc(doc(db, 'doctors', uid), {
  // ... البيانات الأساسية
  nameAr: doctorData.nameAr || doctorData.name,
  consultationPrice: Number(doctorData.price) || Number(doctorData.consultationPrice) || 0,
  experience: Number(doctorData.experience) || 0,
  rating: Number(doctorData.rating) || 0,
  totalReviews: Number(doctorData.totalReviews) || 0,
  totalPatients: Number(doctorData.totalPatients) || 0,
  subscriptionType: doctorData.subscriptionType || 'silver',
  // ... باقي البيانات
});
```

## الملفات المعدلة

1. ✅ `src/pages/AdminDashboard.tsx`
   - تحديث state
   - تحديث handleSaveDoctor
   - تحديث النموذج

2. ✅ `src/services/firebaseService.ts`
   - تحديث دالة addDoctor

## المميزات

### قبل التحديث:
- ❌ إضافة الطبيب بدون تفاصيل كاملة
- ❌ الحاجة لتعديل منفصل لإضافة التقييم والخبرة
- ❌ خطوات متعددة

### بعد التحديث:
- ✅ إضافة جميع البيانات مرة واحدة
- ✅ نموذج شامل وكامل
- ✅ توفير الوقت والجهد
- ✅ تجربة مستخدم أفضل

## التصميم

- Grid بعمودين على الشاشات الكبيرة
- عمود واحد على الشاشات الصغيرة (Mobile Responsive)
- تنسيق موحد مع باقي النماذج
- تصميم احترافي طبي

## القيم الافتراضية

| الحقل | القيمة الافتراضية |
|------|-------------------|
| experience | 0 |
| totalPatients | 0 |
| rating | 0 |
| totalReviews | 0 |
| subscriptionType | silver |

## التحقق من الصحة

- ✅ جميع الحقول الرقمية تقبل أرقام فقط
- ✅ التقييم محدود بين 0 و 5
- ✅ التقييم يقبل أرقام عشرية (step="0.1")
- ✅ الحقول الأساسية مطلوبة (email, password, nameAr)

## الاختبار

### خطوات الاختبار:
1. ✅ تسجيل الدخول كمسؤول
2. ✅ الذهاب إلى قسم "الأطباء"
3. ✅ النقر على "إضافة دكتور جديد"
4. ✅ ملء جميع الحقول
5. ✅ حفظ البيانات
6. ✅ التحقق من إنشاء الطبيب بجميع البيانات

### النتيجة المتوقعة:
- ✅ يتم إنشاء حساب الطبيب
- ✅ جميع البيانات محفوظة بشكل صحيح
- ✅ التقييم والخبرة والاشتراك محفوظين
- ✅ لا حاجة لتعديل منفصل

## الحالة

✅ **مكتمل**
✅ **لا توجد أخطاء**
✅ **جاهز للاستخدام**

## ملاحظات

1. نموذج التعديل المنفصل لا يزال موجوداً للتعديلات اللاحقة
2. يمكن للمسؤول تعديل البيانات في أي وقت
3. جميع الحقول الجديدة اختيارية (لها قيم افتراضية)
4. التصميم متناسق مع باقي النظام

---

**تاريخ التحديث:** 2024
**الحالة:** ✅ مكتمل ومختبر
