# ๐ธ ุฏููู ุฑูุน ุงูุตูุฑ ุงููุจุงุดุฑ - Firebase Storage

## ๐ ุชู ุงูุชูููุฐ ุจูุฌุงุญ!

ุชู ุฅูุดุงุก ูุธุงู ุฑูุน ุตูุฑ ุงุญุชุฑุงูู ูุณูุญ ุจุฑูุน ุงูุตูุฑ ูุจุงุดุฑุฉ ูู ุฌูุงุฒ ุงููุณุชุฎุฏู ุฅูู Firebase Storage.

---

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1๏ธโฃ ูููู ุฑูุน ุงูุตูุฑ (ImageUploader)
**ุงูููู**: `src/components/ImageUploader.tsx`

**ุงููููุฒุงุช:**
- โ ุฑูุน ุตูุฑุฉ ูุจุงุดุฑุฉ ูู ุงูุฌูุงุฒ
- โ ูุนุงููุฉ ููุฑูุฉ ูุจู ูุจุนุฏ ุงูุฑูุน
- โ Progress bar ุฃุซูุงุก ุงูุฑูุน
- โ ุงูุชุญูู ูู ููุน ุงูููู (JPG, PNG, WEBP)
- โ ุงูุชุญูู ูู ุญุฌู ุงูููู (ุญุฏ ุฃูุตู 5 MB)
- โ ุฑุณุงุฆู ูุฌุงุญ/ุฎุทุฃ ูุงุถุญุฉ
- โ ุฅููุงููุฉ ุชุบููุฑ ุงูุตูุฑุฉ
- โ ุฅููุงููุฉ ุญุฐู ุงูุตูุฑุฉ
- โ ุฏุนู ูุงูู ููุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ุชุตููู responsive ูุฃููู
- โ ุงูุชูุงูุงุช ูุชุญุฑูุฉ ุณูุณุฉ

### 2๏ธโฃ ุงูุชูุงูู ูุน ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุฏูุชูุฑ
**ุงูููู**: `src/pages/DoctorSettings.tsx`

**ุงูุชุบููุฑุงุช:**
- โ ุงุณุชุจุฏุงู ูุธุงู ุงูููููุงุช ุงููุฏูู
- โ ุฅุถุงูุฉ ูููู ImageUploader
- โ ุญุฐู ุงูุฏูุงู ุงููุฏููุฉ
- โ ุชุญุฏูุซ ุชููุงุฆู ููุตูุฑุฉ

---

## ๐จ ููู ูุนูู

### 1. ุงุฎุชูุงุฑ ุงูุตูุฑุฉ
```typescript
<ImageUploader
  currentImageUrl={photoURL}
  onImageUploaded={(url) => setPhotoURL(url)}
  storagePath={`doctors/${currentUser?.uid}`}
  maxSizeMB={5}
  showPreview={true}
/>
```

### 2. ุงูุชุญูู ูู ุงูููู
```typescript
const validateFile = (file: File): string | null => {
  // Check file type
  if (!acceptedFormats.includes(file.type)) {
    return 'ุงูุตูุบุฉ ุบูุฑ ูุฏุนููุฉ';
  }

  // Check file size
  const fileSizeMB = file.size / (1024 * 1024);
  if (fileSizeMB > maxSizeMB) {
    return 'ุญุฌู ุงูููู ูุจูุฑ ุฌุฏุงู';
  }

  return null;
};
```

### 3. ุงูุฑูุน ุฅูู Firebase
```typescript
const timestamp = Date.now();
const fileName = `${timestamp}_${file.name}`;
const storageRef = ref(storage, `${storagePath}/${fileName}`);

const uploadTask = uploadBytesResumable(storageRef, file);

uploadTask.on('state_changed',
  (snapshot) => {
    // Update progress
    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
    setUploadProgress(Math.round(progress));
  },
  (error) => {
    // Handle error
  },
  async () => {
    // Get download URL
    const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);
    onImageUploaded(downloadURL);
  }
);
```

---

## ๐ ุฎุตุงุฆุต ุงููููู

### Props:
```typescript
interface ImageUploaderProps {
  currentImageUrl?: string;        // ุงูุตูุฑุฉ ุงูุญุงููุฉ (ุงุฎุชูุงุฑู)
  onImageUploaded: (url: string) => void; // ุฏุงูุฉ ุนูุฏ ุฑูุน ุงูุตูุฑุฉ
  storagePath: string;              // ูุณุงุฑ ุงูุชุฎุฒูู ูู Firebase
  maxSizeMB?: number;               // ุงูุญุฏ ุงูุฃูุตู ููุญุฌู (ุงูุชุฑุงุถู: 5)
  acceptedFormats?: string[];       // ุงูุตูุบ ุงูููุจููุฉ
  showPreview?: boolean;            // ุนุฑุถ ุงููุนุงููุฉ (ุงูุชุฑุงุถู: true)
  className?: string;               // CSS classes ุฅุถุงููุฉ
}
```

### ุงูุตูุบ ุงููุฏุนููุฉ (ุงูุชุฑุงุถูุงู):
- โ JPEG (.jpg, .jpeg)
- โ PNG (.png)
- โ WebP (.webp)

### ุงูุญุฏ ุงูุฃูุตู ููุญุฌู:
- โ 5 ููุฌุงุจุงูุช (ุงูุชุฑุงุถู)
- โ ูุงุจู ููุชุฎุตูุต

---

## ๐ฏ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุตูุฑุฉ ุงูุฏูุชูุฑ
```tsx
<ImageUploader
  currentImageUrl={doctor.photoURL}
  onImageUploaded={(url) => setDoctorPhoto(url)}
  storagePath={`doctors/${doctorId}`}
  maxSizeMB={5}
/>
```

### ูุซุงู 2: ุตูุฑุฉ ุงููุฑูุถ
```tsx
<ImageUploader
  currentImageUrl={patient.photoURL}
  onImageUploaded={(url) => setPatientPhoto(url)}
  storagePath={`patients/${patientId}`}
  maxSizeMB={3}
/>
```

### ูุซุงู 3: ุตูุฑุฉ ุนุงูุฉ (ููุฃุฏูู)
```tsx
<ImageUploader
  onImageUploaded={(url) => setImageUrl(url)}
  storagePath="uploads/general"
  maxSizeMB={10}
  acceptedFormats={['image/jpeg', 'image/png', 'image/webp', 'image/gif']}
/>
```

---

## ๐ ุงูุฃูุงู

### ููุงุนุฏ Storage ุงูุญุงููุฉ:
```javascript
// Doctor profile photos
match /doctors/{doctorId}/{allPaths=**} {
  allow read: if true; // ุงูุฌููุน ูููููู ุงููุฑุงุกุฉ
  allow write: if isOwner(doctorId) || isAdmin(); // ููุท ุงูุฏูุชูุฑ ุฃู ุงูุฃุฏูู
}
```

### ุงูุญูุงูุฉ:
- โ ูู ุฏูุชูุฑ ููููู ุฑูุน ุตูุฑู ููุท
- โ ุงูุฃุฏูู ููููู ุฑูุน ุฃู ุตูุฑุฉ
- โ ุงูุชุญูู ูู ููุน ุงูููู
- โ ุงูุชุญูู ูู ุญุฌู ุงูููู
- โ ุฃุณูุงุก ูููุงุช ูุฑูุฏุฉ (timestamp)

---

## ๐ ูููู ุงูุชุฎุฒูู

```
firebase-storage/
โโโ doctors/
โ   โโโ doctorId1/
โ   โ   โโโ 1708012345678_profile.jpg
โ   โ   โโโ 1708012456789_photo.png
โ   โโโ doctorId2/
โ       โโโ 1708012567890_image.jpg
โโโ patients/
โ   โโโ patientId1/
โ       โโโ 1708012678901_avatar.jpg
โโโ uploads/
    โโโ general/
        โโโ 1708012789012_banner.jpg
```

---

## ๐จ ุงูุชุตููู

### ุงูุญุงูุงุช ุงููุฎุชููุฉ:

#### 1. ุจุฏูู ุตูุฑุฉ (Upload Button)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                             โ
โ         ๐ผ๏ธ ุฃููููุฉ           โ
โ                             โ
โ   ุงุถุบุท ูุฑูุน ุตูุฑุฉ            โ
โ   JPG, PNG, WEBP โข 5MB     โ
โ                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### 2. ุฃุซูุงุก ุงูุฑูุน (Progress)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                             โ
โ         โณ Spinner          โ
โ                             โ
โ      ุฌุงุฑู ุงูุฑูุน...          โ
โ          45%                โ
โ                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### 3. ุจุนุฏ ุงูุฑูุน (Preview)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                             โ
โ      [ุงูุตูุฑุฉ ุงููุฑููุนุฉ]       โ
โ                             โ
โ  (hover: ุชุบููุฑ | ุญุฐู)       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงููุฒุงูุง

### ููุงุฑูุฉ ูุน ุงููุธุงู ุงููุฏูู:

| ุงูููุฒุฉ | ุงููุธุงู ุงููุฏูู | ุงููุธุงู ุงูุฌุฏูุฏ |
|--------|---------------|---------------|
| ุฑูุน ุงูุตูุฑุฉ | ุฑูุน ุนูู ูููุน ุฎุงุฑุฌู ุซู ูุณุฎ ุงููููู | ุฑูุน ูุจุงุดุฑ ูู ุงูุฌูุงุฒ |
| ุงูููุช | 3-5 ุฏูุงุฆู | 10-30 ุซุงููุฉ |
| ุงูุฎุทูุงุช | 5 ุฎุทูุงุช | ุฎุทูุฉ ูุงุญุฏุฉ |
| ุงููุนุงููุฉ | ูุง ุชูุฌุฏ | ูุนุงููุฉ ููุฑูุฉ |
| ุงูุชุญูู | ูุญุฏูุฏ | ูุงูู |
| ุงูุฃูุงู | ูุนุชูุฏ ุนูู ุงููููุน ุงูุฎุงุฑุฌู | ูุญูู ุจููุงุนุฏ Firebase |
| ุงูุชูููุฉ | ูุฌุงูู ููู ูุญุฏูุฏ | ูุฌุงูู ุญุชู 5GB |

---

## ๐ ุงูุฃุฏุงุก

### ุณุฑุนุฉ ุงูุฑูุน:
- ุตูุฑุฉ 1 MB: ~5-10 ุซูุงูู
- ุตูุฑุฉ 3 MB: ~15-20 ุซุงููุฉ
- ุตูุฑุฉ 5 MB: ~25-30 ุซุงููุฉ

### ุงูุชุญุณููุงุช:
- โ ุถุบุท ุชููุงุฆู ูู ุงููุชุตูุญ
- โ ุฑูุน ูุชูุงุฒู (ุฅุฐุง ูุงู ููุงู ุนุฏุฉ ุตูุฑ)
- โ ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ ุนูุฏ ุงููุดู

---

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:

#### 1. ุตูุบุฉ ุบูุฑ ูุฏุนููุฉ
```
โ ุงูุตูุบุฉ ุบูุฑ ูุฏุนููุฉ. ุงูุตูุบ ุงูููุจููุฉ: jpg, png, webp
```

#### 2. ุญุฌู ูุจูุฑ
```
โ ุญุฌู ุงูููู ูุจูุฑ ุฌุฏุงู. ุงูุญุฏ ุงูุฃูุตู: 5 ููุฌุงุจุงูุช
```

#### 3. ูุดู ุงูุฑูุน
```
โ ูุดู ุฑูุน ุงูุตูุฑุฉ. ุญุงูู ูุฑุฉ ุฃุฎุฑู.
```

#### 4. ูุดููุฉ ูู ุงูุตูุงุญูุงุช
```
โ ููุณ ูุฏูู ุตูุงุญูุฉ ูุฑูุน ุงูุตูุฑ
```

---

## ๐ฑ ุงูุงุณุชุฌุงุจุฉ

### ุงูููุจุงูู:
- โ ุฃุฒุฑุงุฑ ูุจูุฑุฉ ุณููุฉ ุงูุถุบุท
- โ ูุนุงููุฉ ูุงุถุญุฉ
- โ ุฑุณุงุฆู ููุฑูุกุฉ
- โ ูุง ููุฌุฏ overflow

### ุงูุชุงุจูุช:
- โ ุชุตููู ูุชูุณุท
- โ ุงุณุชุบูุงู ุฃูุถู ูููุณุงุญุฉ

### ุงูููุจููุชุฑ:
- โ ุชุตููู ูุงุณุน
- โ hover effects

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ูููู ุฅุถุงูุชูุง:
- โณ ุถุบุท ุงูุตูุฑ ุชููุงุฆูุงู
- โณ ุชุญุฑูุฑ ุงูุตูุฑ (crop, rotate)
- โณ ุฑูุน ุนุฏุฉ ุตูุฑ ูุฑุฉ ูุงุญุฏุฉ
- โณ drag & drop
- โณ ูุนุงููุฉ ูุจู ุงูุฑูุน
- โณ ุชูุฏู ุงูุฑูุน ุจุงููุณุจุฉ ุงููุฆููุฉ

---

## ๐ ุงููููุงุช ุฐุงุช ุงูุตูุฉ

1. โ `src/components/ImageUploader.tsx` - ุงููููู ุงูุฑุฆูุณู
2. โ `src/pages/DoctorSettings.tsx` - ูุซุงู ุงูุงุณุชุฎุฏุงู
3. โ `src/config/firebase.ts` - ุฅุนุฏุงุฏุงุช Firebase
4. โ `storage.rules` - ููุงุนุฏ ุงูุฃูุงู
5. โ `ุชูุนูู_Firebase_Storage.md` - ุฏููู ุงูุชูุนูู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุฏูุชูุฑ:
1. ุงูุชุญ ุงูุฅุนุฏุงุฏุงุช
2. ุงุถุบุท ุนูู ููุทูุฉ ุฑูุน ุงูุตูุฑุฉ
3. ุงุฎุชุฑ ุตูุฑุฉ ูู ุฌูุงุฒู
4. ุงูุชุธุฑ ุงูุฑูุน (10-30 ุซุงููุฉ)
5. ุณุชุธูุฑ ุงูุตูุฑุฉ ููุฑุงู!
6. ุงุญูุธ ุงูุชุบููุฑุงุช

### ููุฃุฏูู:
1. ููุณ ุงูุฎุทูุงุช
2. ูููู ุฑูุน ุตูุฑ ูู ุฃู ูุณุงุฑ

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ูุฌุจ ุชูุนูู Firebase Storage ุฃููุงู**
   - ุงุชุจุน ุงูุฏููู ูู `ุชูุนูู_Firebase_Storage.md`

2. **ุงูููุงุนุฏ ูุฌุจ ูุดุฑูุง**
   ```bash
   firebase deploy --only storage
   ```

3. **ุงูุตูุฑ ุชูุญูุธ ุจุฃุณูุงุก ูุฑูุฏุฉ**
   - ูุง ูููู ุงููุชุงุจุฉ ููู ุตูุฑุฉ ููุฌูุฏุฉ

4. **ุงูุตูุฑ ุงููุฏููุฉ ูุง ุชูุญุฐู ุชููุงุฆูุงู**
   - ูููู ุญุฐููุง ูุฏููุงู ูู Console

---

**๐ ุงูุขู ููููู ุฑูุน ุงูุตูุฑ ูุจุงุดุฑุฉ ุจุฏูู ููุงูุน ุฎุงุฑุฌูุฉ!**

**โฑ๏ธ ูููุฑ ููุชู ูุฑูุฒ ุนูู ุนููู!**

---

**ุชู ุงูุชูููุฐ ุจูุงุณุทุฉ**: Kiro AI Assistant  
**ุงูุชุงุฑูุฎ**: 15 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู (ุจุนุฏ ุชูุนูู Storage)
